'use strict';Object.defineProperty(exports,'__esModule',{value:!0});exports.animate=exports.trackTouchesForElement=exports.onScrollStart=exports.onScrollEnd=exports.onScroll=exports.onWindowScroll=exports.on=exports.maxMap=exports.minMap=exports.compose=exports.values=void 0;var _easing=require('./easing');function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var values=exports.values=Object.values||function(a){return Object.keys(a).map(function(b){return a[b]})};var compose=exports.compose=function compose(){for(var _len=arguments.length,a=Array(_len),_key=0;_key<_len;_key++)a[_key]=arguments[_key];return function(b){return a.reduceRight(function(c,d){return d(c)},b)}};var minMap=exports.minMap=function minMap(){for(var _len2=arguments.length,a=Array(_len2),_key2=0;_key2<_len2;_key2++)a[_key2]=arguments[_key2];return function(b){return Math.min.apply(Math,a.concat([b]))}};var maxMap=exports.maxMap=function maxMap(){for(var _len3=arguments.length,a=Array(_len3),_key3=0;_key3<_len3;_key3++)a[_key3]=arguments[_key3];return function(b){return Math.max.apply(Math,a.concat([b]))}};var on=exports.on=function on(a){var b=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(c){return function(d){return d.addEventListener(a,c,b)}}};var onWindowScroll=exports.onWindowScroll=function onWindowScroll(a){return on('scroll',!0)(a)(window)};var onScroll=exports.onScroll=function onScroll(a){var _ref=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref$target=_ref.target,b=void 0===_ref$target?window:_ref$target;return onWindowScroll(function(c){return(b===window||b===c.target)&&a(c)})};var onScrollEnd=exports.onScrollEnd=function onScrollEnd(a){var _ref2=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref2$wait=_ref2.wait,b=void 0===_ref2$wait?200:_ref2$wait,_ref2$target=_ref2.target,c=void 0===_ref2$target?window:_ref2$target;return function(d){return onScroll(function(f){clearTimeout(d),d=setTimeout(function(){return f.target===c?a():void 0},b)})}(0)};var onScrollStart=exports.onScrollStart=function onScrollStart(a){var _ref3=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref3$target=_ref3.target,b=void 0===_ref3$target?window:_ref3$target,c=!1;onScrollEnd(function(){return c=!1},{target:b}),onScroll(function(d){c||(c=!0,a(d))},{target:b})};var trackTouchesForElement=exports.trackTouchesForElement=function trackTouchesForElement(a){var b=[];return on('touchstart')(function(_ref4){var c=_ref4.changedTouches,d=[].slice.call(c).map(function(_ref5){var f=_ref5.identifier;return f});b=[].concat(_toConsumableArray(b),_toConsumableArray(d))})(a),on('touchend')(function(_ref6){var c=_ref6.changedTouches,d=[].slice.call(c).map(function(_ref7){var f=_ref7.identifier;return f});b=b.filter(function(f){return!d.includes(f)})})(a),function(){return b.length}};var animate=exports.animate=function animate(a){var _ref8=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref8$delta=_ref8.delta,b=void 0===_ref8$delta?0:_ref8$delta,_ref8$immediate=_ref8.immediate,c=void 0!==_ref8$immediate&&_ref8$immediate,_ref8$duration=_ref8.duration,d=void 0===_ref8$duration?c?0:1e3:_ref8$duration,_ref8$easing=_ref8.easing,f=void 0===_ref8$easing?_easing.easeInOutQuint:_ref8$easing,_ref8$prop=_ref8.prop,g=void 0===_ref8$prop?'scrollTop':_ref8$prop;return new Promise(function(h){var i=a[g],j=null,k=function k(l){j||(j=l);var m=l-j,n=f(m/d);a[g]=i+b*n,m<d?window.requestAnimationFrame(k):(a[g]=i+b,a.setAttribute('style',a.getAttribute('style').replace(/(overflow:\s?)\w*/,'$1auto')),h())};// We are going to temporarily prevent the user from being able to scroll during the animation.
// This will prevent a janky fight between user scroll and animation which is just bad user experience.
a.style.overflow='hidden',window.requestAnimationFrame(k)})};