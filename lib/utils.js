'use strict';Object.defineProperty(exports,'__esModule',{value:!0});exports.animate=exports.hasOngoingInteraction=exports.trackOngoingMouseInteraction=exports.trackTouchesForElement=exports.onSwipe=exports.onScrollStart=exports.onScrollEnd=exports.onScroll=exports.onWindowScroll=exports.on=exports.noop=exports.maxMap=exports.minMap=exports.compose=exports.values=void 0;var _easing=require('./easing'),values=exports.values=Object.values||function(a){return Object.keys(a).map(function(b){return a[b]})},compose=exports.compose=function compose(){for(var _len=arguments.length,a=Array(_len),_key=0;_key<_len;_key++)a[_key]=arguments[_key];return function(b){return a.reduceRight(function(c,d){return d(c)},b)}},minMap=exports.minMap=function minMap(){for(var _len2=arguments.length,a=Array(_len2),_key2=0;_key2<_len2;_key2++)a[_key2]=arguments[_key2];return function(b){return Math.min.apply(Math,a.concat([b]))}},maxMap=exports.maxMap=function maxMap(){for(var _len3=arguments.length,a=Array(_len3),_key3=0;_key3<_len3;_key3++)a[_key3]=arguments[_key3];return function(b){return Math.max.apply(Math,a.concat([b]))}},noop=exports.noop=function noop(){},on=exports.on=function on(a){var b=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(c){return function(d){return d.addEventListener(a,c,b),function(){return d.removeEventListener(a,c)}}}},onWindowScroll=exports.onWindowScroll=function onWindowScroll(a){return on('scroll',!0)(a)(window)},onScroll=exports.onScroll=function onScroll(a){var _ref=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref$target=_ref.target,b=void 0===_ref$target?window:_ref$target;return onWindowScroll(function(c){return(b===window||b===c.target)&&a(c)})},onScrollEnd=exports.onScrollEnd=function onScrollEnd(a){var _ref2=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref2$wait=_ref2.wait,b=void 0===_ref2$wait?100:_ref2$wait,_ref2$target=_ref2.target,c=void 0===_ref2$target?window:_ref2$target;return function(d){return onScroll(function(f){clearTimeout(d),d=setTimeout(function(){return f.target===c?a():void 0},b)})}(0)},onScrollStart=exports.onScrollStart=function onScrollStart(a){var _ref3=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref3$target=_ref3.target,b=void 0===_ref3$target?window:_ref3$target,c=!1,d=onScrollEnd(function(){c=!1},{target:b}),f=onScroll(function(g){c||(c=!0,a(g))},{target:b});return function(){f(),d()}},onSwipe=exports.onSwipe=function onSwipe(a){return function(b){var c=on('touchstart')(function(_ref4){var d=_ref4.targetTouches,_d$=d[0],f=_d$.pageX,g=_d$.pageY,h=on('touchend')(function(_ref5){var i=_ref5.changedTouches,_i$=i[0],j=_i$.pageX,k=_i$.pageY,l=j-f,m=Math.abs(l),n=k-g,o=Math.abs(n);if(20<Math.max(m,o)){var p=m>o?/* h */0>l?'right':'left':/* v */0>n?'down':'up';a(p)}h()})(b)})(b);return c}},trackTouchesForElement=exports.trackTouchesForElement=function trackTouchesForElement(a){var b=[];return on('touchend')(function(_ref6){var c=_ref6.targetTouches;b=c})(a),function(){return b.length}},trackOngoingMouseInteraction=exports.trackOngoingMouseInteraction=function trackOngoingMouseInteraction(a){var b=!1;return on('mousedown')(function(){b=!0})(a),on('mouseup')(function(){b=!1})(document.body),function(){return b}},hasOngoingInteraction=exports.hasOngoingInteraction=function hasOngoingInteraction(a){var b=trackTouchesForElement(a),c=trackOngoingMouseInteraction(a);return function(){return b()||c()}},animate=exports.animate=function animate(a){var _ref7=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref7$delta=_ref7.delta,b=void 0===_ref7$delta?0:_ref7$delta,_ref7$immediate=_ref7.immediate,c=void 0!==_ref7$immediate&&_ref7$immediate,_ref7$duration=_ref7.duration,d=void 0===_ref7$duration?500:_ref7$duration,_ref7$easing=_ref7.easing,f=void 0===_ref7$easing?_easing.easeOutQuint:_ref7$easing,_ref7$prop=_ref7.prop,g=void 0===_ref7$prop?'scrollTop':_ref7$prop;return new Promise(function(h){var i=void 0;b||h();var j=a[g];c&&(a[g]=j+b,h());var k=null,l=function l(m){k||(k=m);var n=m-k,o=f(n/d);a[g]=j+b*o,n<d?window.requestAnimationFrame(l):(a[g]=j+b,h(i))};i=a.getAttribute('style'),a.style.overflow='hidden',window.requestAnimationFrame(l)}).then(function(h){return setTimeout(function(){a.setAttribute('style',h||a.getAttribute('style').replace(/(overflow:\s?)\w*/,'$1auto'))},0)})};