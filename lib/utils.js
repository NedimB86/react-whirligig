'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.animate=exports.isWhollyInView=exports.hasOngoingInteraction=exports.trackOngoingMouseInteraction=exports.trackTouchesForElement=exports.onSwipe=exports.onScrollStart=exports.onScrollEnd=exports.onScroll=exports.onWindowScroll=exports.on=exports.noop=exports.maxMap=exports.minMap=exports.compose=exports.values=exports.includes=void 0;var _easing=require('./easing'),includes=exports.includes=function(a,b){return b.includes?b.includes(a):!!b.filter(function(b){return b===a}).length},values=exports.values=Object.values||function(a){return Object.keys(a).map(function(b){return a[b]})},compose=exports.compose=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return b.reduceRight(function(a,b){return b(a)},a)}},minMap=exports.minMap=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return Math.min.apply(Math,b.concat([a]))}},maxMap=exports.maxMap=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return Math.max.apply(Math,b.concat([a]))}},noop=exports.noop=function(){},on=exports.on=function(a){var b=1<arguments.length&&arguments[1]!==void 0&&arguments[1];return function(c){return function(d){return d.addEventListener(a,c,b),function(){return d.removeEventListener(a,c)}}}},onWindowScroll=exports.onWindowScroll=function(a){return on('scroll',!0)(a)(window)},onScroll=exports.onScroll=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=b.target,d=c===void 0?window:c;return onWindowScroll(function(b){return(d===window||d===b.target)&&a(b)})},onScrollEnd=exports.onScrollEnd=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=b.wait,d=c===void 0?100:c,e=b.target,f=e===void 0?window:e;return function(b){return onScroll(function(c){clearTimeout(b),b=setTimeout(function(){return c.target===f?a():void 0},d)})}(0)},onScrollStart=exports.onScrollStart=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=b.target,d=c===void 0?window:c,f=!1,e=onScrollEnd(function(){f=!1},{target:d}),g=onScroll(function(b){f||(f=!0,a(b))},{target:d});return function(){g(),e()}},onSwipe=exports.onSwipe=function(a){return function(b){var c=on('touchstart')(function(c){var d=c.targetTouches,e=d[0],f=e.pageX,g=e.pageY,h=on('touchend')(function(b){var c=Math.abs,d=b.changedTouches,e=d[0],i=e.pageX,j=e.pageY,k=i-f,l=c(k),m=j-g,n=c(m);if(20<Math.max(l,n)){var o=l>n?0>k?'right':'left':0>m?'down':'up';a(o)}h()})(b)})(b);return c}},trackTouchesForElement=exports.trackTouchesForElement=function(a){var b=[];return on('touchend')(function(a){var c=a.targetTouches;b=c})(a),function(){return b.length}},trackOngoingMouseInteraction=exports.trackOngoingMouseInteraction=function(a){var b=!1;return on('mousedown')(function(){b=!0})(a),on('mouseup')(function(){b=!1})(document.body),function(){return b}},hasOngoingInteraction=exports.hasOngoingInteraction=function(a){var b=trackTouchesForElement(a),c=trackOngoingMouseInteraction(a);return function(){return b()||c()}},isWhollyInView=exports.isWhollyInView=function(a){return function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{getBoundingClientRect:function getBoundingClientRect(){return{}}},c=b.getBoundingClientRect(),d=c.left,e=c.right,f=a.getBoundingClientRect(),g=f.left,h=f.right;return d>=g&&e<=h}},animate=exports.animate=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=b.delta,d=c===void 0?0:c,e=b.immediate,f=b.duration,g=f===void 0?500:f,h=b.easing,i=h===void 0?_easing.easeOutQuint:h,j=b.prop,k=j===void 0?'scrollTop':j;return new Promise(function(b,c){if(!d)return b();var f=a[k];if(e!==void 0&&e)return a[k]=f+d,b();var h=!1,j=function(){h=!0;var b=a[k];return a.removeEventListener('touchstart',j),a[k]=b,c('Animation interupted by interaction')};a.addEventListener('touchstart',j);var l=null,m=function(c){if(!h){l||(l=c);var e=c-l,j=i(e/g);a[k]=f+d*j,e<g?window.requestAnimationFrame(m):(a[k]=f+d,b())}};window.requestAnimationFrame(m)})};